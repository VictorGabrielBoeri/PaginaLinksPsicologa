<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maria Silva - Designer Gráfica</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Notiflix CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notiflix@3.2.6/dist/notiflix-3.2.6.min.css">
    <script>
        // ===== SCRIPT PARA TORNAR O HTML DINÂMICO =====
// Este script carrega o config.json e aplica todas as configurações automaticamente

class DynamicSiteLoader {
  constructor() {
    this.config = null;
    this.configUrl = './config.json';
    this.init();
  }

  async init() {
    try {
      await this.loadConfig();
      this.applyAllConfigurations();
      this.setupAutoRefresh();
      console.log('Site dinâmico carregado com sucesso!');
    } catch (error) {
      console.error('Erro ao inicializar site dinâmico:', error);
    }
  }

  // Carregar configurações do config.json
  async loadConfig() {
    try {
      const response = await fetch(this.configUrl);
      if (!response.ok) {
        throw new Error(`Erro ao carregar config: ${response.status}`);
      }
      this.config = await response.json();
      console.log('Configurações carregadas:', this.config);
      return this.config;
    } catch (error) {
      console.error('Erro ao carregar configurações:', error);
      // Usar configurações padrão se não conseguir carregar
      this.config = this.getDefaultConfig();
      return this.config;
    }
  }

  // Configurações padrão caso o config.json não seja encontrado
  getDefaultConfig() {
    return {
      siteName: "Meu Site",
      description: "Descrição do site",
      profile: {
        name: "Nome",
        title: "Título",
        bio: "Bio",
        image: "",
        location: "",
        experience: ""
      },
      theme: {
        primaryColor: "#6366f1",
        secondaryColor: "#8b5cf6",
        backgroundColor: "#0f172a",
        textColor: "#ffffff",
        particleColor: "#6366f1",
        profileBorderColor: "#8b5cf6",
        linkHoverColor: "#a855f7"
      },
      links: [],
      appointment: {
        enabled: false,
        whatsappNumber: "",
        workingHours: {
          start: "08:00",
          end: "18:00"
        }
      }
    };
  }

  // Aplicar todas as configurações
  applyAllConfigurations() {
    if (!this.config) return;

    this.updatePageTitle();
    this.updateMetaTags();
    this.updateProfileInfo();
    this.updateThemeColors();
    this.updatePseudoElements();
    this.updateSocialLinks();
    this.updateAppointmentSection();
    this.updateFavicon();
  }

  // Atualizar título da página
  updatePageTitle() {
    if (this.config.siteName) {
      document.title = this.config.siteName;
    }
    
    // Atualizar meta description
    let metaDesc = document.querySelector('meta[name="description"]');
    if (!metaDesc) {
      metaDesc = document.createElement('meta');
      metaDesc.name = 'description';
      document.head.appendChild(metaDesc);
    }
    metaDesc.content = this.config.description || 'Site pessoal';
  }

  // Atualizar meta tags
  updateMetaTags() {
    const updateOrCreateMeta = (property, content) => {
      let meta = document.querySelector(`meta[property="${property}"]`);
      if (!meta) {
        meta = document.createElement('meta');
        meta.property = property;
        document.head.appendChild(meta);
      }
      meta.content = content;
    };

    // Open Graph tags
    updateOrCreateMeta('og:title', this.config.siteName || 'Meu Site');
    updateOrCreateMeta('og:description', this.config.description || 'Site pessoal');
    if (this.config.profile?.image) {
      updateOrCreateMeta('og:image', this.config.profile.image);
    }
  }

  // Atualizar informações do perfil
  updateProfileInfo() {
    const profile = this.config.profile;
    if (!profile) return;

    // Atualizar nome
    this.updateElements([
      '.profile-name', '.name', '.user-name', 
      '[data-profile="name"]', 'h1.name', '.hero-name'
    ], profile.name);

    // Atualizar título/especialização
    this.updateElements([
      '.profile-title', '.title', '.user-title', 
      '[data-profile="title"]', '.hero-title', '.subtitle'
    ], profile.title);

    // Atualizar bio/descrição
    this.updateElements([
      '.profile-bio', '.bio', '.user-bio', 
      '[data-profile="bio"]', '.description', '.about'
    ], profile.bio);

    // Atualizar localização
    this.updateElements([
      '.profile-location', '.location', 
      '[data-profile="location"]'
    ], profile.location);

    // Atualizar experiência
    this.updateElements([
      '.profile-experience', '.experience', 
      '[data-profile="experience"]'
    ], profile.experience);

    // Atualizar foto do perfil
    if (profile.image) {
      this.updateProfileImages(profile.image, profile.name);
    }
  }

  // Função auxiliar para atualizar múltiplos elementos
  updateElements(selectors, content) {
    if (!content) return;
    
    selectors.forEach(selector => {
      const elements = document.querySelectorAll(selector);
      elements.forEach(el => {
        if (el) el.textContent = content;
      });
    });
  }

  // Atualizar imagens do perfil
  updateProfileImages(imageUrl, altText) {
    const imageSelectors = [
      '.profile-image', '.profile-photo img', '.user-image', 
      '.avatar', '[data-profile="image"]', '.hero-image img'
    ];

    imageSelectors.forEach(selector => {
      const elements = document.querySelectorAll(selector);
      elements.forEach(el => {
        if (el) {
          el.src = imageUrl;
          el.alt = altText || 'Foto do perfil';
          el.onerror = () => {
            console.warn(`Erro ao carregar imagem: ${imageUrl}`);
            el.style.display = 'none';
          };
        }
      });
    });
  }

  // Atualizar cores do tema
  updateThemeColors() {
    const theme = this.config.theme;
    if (!theme) return;

    const root = document.documentElement;
    
    // Definir variáveis CSS customizadas
    const cssVariables = {
      '--primary-color': theme.primaryColor || '#6366f1',
      '--secondary-color': theme.secondaryColor || '#8b5cf6',
      '--background-color': theme.backgroundColor || '#0f172a',
      '--text-color': theme.textColor || '#ffffff',
      '--particle-color': theme.particleColor || theme.primaryColor || '#6366f1',
      '--profile-border-color': theme.profileBorderColor || theme.secondaryColor || '#8b5cf6',
      '--link-hover-color': theme.linkHoverColor || theme.primaryColor || '#6366f1'
    };

    // Aplicar variáveis CSS
    Object.entries(cssVariables).forEach(([property, value]) => {
      root.style.setProperty(property, value);
    });

    // Aplicar cores diretamente em elementos específicos
    this.applyDirectColors(theme);
  }

  // Aplicar cores diretamente em elementos
  applyDirectColors(theme) {
    // Fundo do body
    document.body.style.backgroundColor = theme.backgroundColor || '#0f172a';
    document.body.style.color = theme.textColor || '#ffffff';

    // Elementos com gradiente
    const gradientElements = document.querySelectorAll('.gradient-bg, .hero-bg, .background');
    gradientElements.forEach(el => {
      el.style.background = `linear-gradient(135deg, ${theme.primaryColor || '#6366f1'}, ${theme.secondaryColor || '#8b5cf6'})`;
    });

    // Botões primários
    const primaryButtons = document.querySelectorAll('.btn-primary, .button-primary');
    primaryButtons.forEach(el => {
      el.style.backgroundColor = theme.primaryColor || '#6366f1';
      el.style.borderColor = theme.primaryColor || '#6366f1';
    });

    // Links e elementos de destaque
    const accentElements = document.querySelectorAll('.accent, .highlight, a:not(.btn)');
    accentElements.forEach(el => {
      el.style.color = theme.primaryColor || '#6366f1';
    });
  }

  // Atualizar pseudo-elementos com CSS dinâmico
  updatePseudoElements() {
    const theme = this.config.theme;
    if (!theme) return;

    // Remover estilo anterior
    const existingStyle = document.getElementById('dynamic-pseudo-styles');
    if (existingStyle) {
      existingStyle.remove();
    }

    // Criar novo estilo
    const style = document.createElement('style');
    style.id = 'dynamic-pseudo-styles';
    
    const particleColor = theme.particleColor || theme.primaryColor || '#6366f1';
    const profileBorderColor = theme.profileBorderColor || theme.secondaryColor || '#8b5cf6';
    const linkHoverColor = theme.linkHoverColor || theme.primaryColor || '#6366f1';
    
    style.textContent = `
      /* Partículas de fundo */
      .background-particles::before,
      .particles::before,
      body::before,
      .hero::before {
        content: '' !important;
        position: absolute !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        background-image: radial-gradient(circle, ${particleColor}33 1px, transparent 1px) !important;
        background-size: 50px 50px !important;
        opacity: 0.3 !important;
        pointer-events: none !important;
        z-index: -1 !important;
      }
      
      /* Borda da foto do perfil */
      .profile-image::before,
      .profile-photo::before,
      .avatar::before {
        content: '' !important;
        position: absolute !important;
        top: -3px !important;
        left: -3px !important;
        right: -3px !important;
        bottom: -3px !important;
        border: 3px solid ${profileBorderColor} !important;
        border-radius: inherit !important;
        box-shadow: 0 0 20px ${profileBorderColor}66 !important;
        z-index: -1 !important;
      }
      
      /* Hover dos links */
      .link-card:hover::before,
      .social-link:hover::before,
      .btn:hover::before {
        content: '' !important;
        position: absolute !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        background: linear-gradient(45deg, ${linkHoverColor}44, ${linkHoverColor}22) !important;
        border-radius: inherit !important;
        z-index: -1 !important;
      }
      
      /* Efeitos de brilho */
      .glow::before {
        content: '' !important;
        position: absolute !important;
        top: -2px !important;
        left: -2px !important;
        right: -2px !important;
        bottom: -2px !important;
        background: linear-gradient(45deg, ${theme.primaryColor || '#6366f1'}, ${theme.secondaryColor || '#8b5cf6'}) !important;
        border-radius: inherit !important;
        filter: blur(10px) !important;
        opacity: 0.7 !important;
        z-index: -1 !important;
      }
    `;
    
    document.head.appendChild(style);
  }

  // Atualizar links sociais
  updateSocialLinks() {
    const links = this.config.links;
    if (!links || !Array.isArray(links)) return;

    // Procurar containers de links
    const linkContainers = document.querySelectorAll([
      '.social-links', '.links-container', '.social-media',
      '[data-links]', '.contact-links', '.profile-links'
    ].join(','));

    linkContainers.forEach(container => {
      this.renderLinksInContainer(container, links);
    });
  }

  // Renderizar links em um container
  renderLinksInContainer(container, links) {
    if (!container) return;

    container.innerHTML = '';
    
    const activeLinks = links.filter(link => link.active !== false);
    
    activeLinks.forEach(link => {
      const linkElement = this.createLinkElement(link);
      container.appendChild(linkElement);
    });
  }

  // Criar elemento de link
  createLinkElement(link) {
    const linkEl = document.createElement('a');
    linkEl.href = link.url || '#';
    linkEl.target = '_blank';
    linkEl.rel = 'noopener noreferrer';
    linkEl.className = 'link-card social-link';
    linkEl.style.cssText = `
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 20px;
      margin: 5px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 10px;
      color: ${link.color || this.config.theme?.primaryColor || '#6366f1'};
      text-decoration: none;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    `;
    
    // Adicionar ícone
    if (link.icon) {
      const icon = document.createElement('i');
      icon.className = link.icon;
      icon.style.fontSize = '18px';
      linkEl.appendChild(icon);
    }
    
    // Adicionar texto
    const text = document.createElement('span');
    text.textContent = link.title || 'Link';
    linkEl.appendChild(text);
    
    // Efeitos de hover
    linkEl.addEventListener('mouseenter', () => {
      linkEl.style.transform = 'translateY(-2px)';
      linkEl.style.boxShadow = `0 5px 15px ${link.color || this.config.theme?.primaryColor || '#6366f1'}33`;
    });
    
    linkEl.addEventListener('mouseleave', () => {
      linkEl.style.transform = 'translateY(0)';
      linkEl.style.boxShadow = 'none';
    });
    
    return linkEl;
  }

  // Atualizar seção de agendamento
  updateAppointmentSection() {
    const appointment = this.config.appointment;
    if (!appointment) return;

    const appointmentSections = document.querySelectorAll([
      '.appointment-section', '.booking-section', 
      '[data-appointment]', '.schedule'
    ].join(','));

    appointmentSections.forEach(section => {
      if (appointment.enabled) {
        section.style.display = 'block';
        this.updateAppointmentInfo(section, appointment);
      } else {
        section.style.display = 'none';
      }
    });
  }

  // Atualizar informações de agendamento
  updateAppointmentInfo(section, appointment) {
    // Atualizar número do WhatsApp
    const whatsappElements = section.querySelectorAll('.whatsapp-number, [data-whatsapp]');
    whatsappElements.forEach(el => {
      if (appointment.whatsappNumber) {
        el.textContent = appointment.whatsappNumber;
        el.href = `https://wa.me/${appointment.whatsappNumber.replace(/\D/g, '')}`;
      }
    });

    // Atualizar horários de funcionamento
    const hoursElements = section.querySelectorAll('.working-hours, [data-hours]');
    hoursElements.forEach(el => {
      if (appointment.workingHours) {
        el.textContent = `${appointment.workingHours.start} - ${appointment.workingHours.end}`;
      }
    });
  }

  // Atualizar favicon
  updateFavicon() {
    if (this.config.profile?.image) {
      let favicon = document.querySelector('link[rel="icon"]');
      if (!favicon) {
        favicon = document.createElement('link');
        favicon.rel = 'icon';
        document.head.appendChild(favicon);
      }
      favicon.href = this.config.profile.image;
    }
  }

  // Configurar atualização automática
  setupAutoRefresh() {
    // Recarregar configurações a cada 30 segundos
    setInterval(async () => {
      try {
        const oldConfig = JSON.stringify(this.config);
        await this.loadConfig();
        const newConfig = JSON.stringify(this.config);
        
        // Se houve mudanças, reaplicar configurações
        if (oldConfig !== newConfig) {
          console.log('Configurações atualizadas, reaplicando...');
          this.applyAllConfigurations();
        }
      } catch (error) {
        console.error('Erro ao verificar atualizações:', error);
      }
    }, 30000);
  }

  // Método público para recarregar manualmente
  async reload() {
    await this.loadConfig();
    this.applyAllConfigurations();
    console.log('Site recarregado manualmente');
  }

  // Método público para obter configurações atuais
  getConfig() {
    return this.config;
  }
}

// ===== INICIALIZAÇÃO =====
// Inicializar quando o DOM estiver pronto
let siteLoader;

if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', () => {
    siteLoader = new DynamicSiteLoader();
  });
} else {
  siteLoader = new DynamicSiteLoader();
}

// Expor globalmente para debug
window.siteLoader = siteLoader;

// ===== CSS ADICIONAL PARA SUPORTE =====
// Adicionar CSS base para elementos dinâmicos
const baseStyle = document.createElement('style');
baseStyle.id = 'dynamic-base-styles';
baseStyle.textContent = `
  /* Variáveis CSS base */
  :root {
    --primary-color: #6366f1;
    --secondary-color: #8b5cf6;
    --background-color: #0f172a;
    --text-color: #ffffff;
    --particle-color: #6366f1;
    --profile-border-color: #8b5cf6;
    --link-hover-color: #6366f1;
  }
  
  /* Estilos base para elementos dinâmicos */
  .link-card {
    position: relative;
    transition: all 0.3s ease;
  }
  
  .profile-image,
  .profile-photo,
  .avatar {
    position: relative;
    border-radius: 50%;
  }
  
  .gradient-bg {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  }
  
  /* Responsividade */
  @media (max-width: 768px) {
    .link-card {
      padding: 10px 15px;
      margin: 3px;
    }
  }
`;

document.head.appendChild(baseStyle);

// ===== FUNÇÕES UTILITÁRIAS GLOBAIS =====
// Função para testar configurações no console
window.testConfig = function(newConfig) {
  if (siteLoader) {
    siteLoader.config = { ...siteLoader.config, ...newConfig };
    siteLoader.applyAllConfigurations();
    console.log('Configuração de teste aplicada:', newConfig);
  }
};

// Função para recarregar site
window.reloadSite = function() {
  if (siteLoader) {
    siteLoader.reload();
  }
};

console.log('🚀 Script de HTML dinâmico carregado com sucesso!');
console.log('💡 Use window.testConfig({...}) para testar configurações');
console.log('🔄 Use window.reloadSite() para recarregar manualmente');
    </script>
</head>
<body>
    <div class="container">
        <!-- Seção do perfil -->
        <div class="profile-section">
            <div class="profile-image">
                <img src="img/perfil.jpg" alt="Maria Silva" width="150" id="profileImg">
            </div>
            <h1>Maria Silva</h1>
            <p class="subtitle">Designer Gráfica</p>
        </div>

        <!-- Seção dos links -->
        <div class="links-section">
            <!-- Agendamento -->
            <div class="link-card appointment-card" id="appointmentBtn">
                <div class="card-content">
                    <i class="fas fa-calendar-check"></i>
                    <div class="card-text">
                        <h3>Agendar Reunião</h3>
                        <p>Vamos conversar sobre seu projeto!</p>
                    </div>
                </div>
            </div>

            <!-- WhatsApp -->
            <div class="link-card whatsapp-card">
                <div class="card-content">
                    <i class="fab fa-whatsapp"></i>
                    <div class="card-text">
                        <h3>Contato Direto</h3>
                        <p>Tire suas dúvidas pelo WhatsApp!</p>
                    </div>
                </div>
            </div>

            <!-- Instagram -->
            <div class="link-card instagram-card">
                <div class="card-content" style="margin-bottom: 40px;">
                    <i class="fab fa-instagram"></i>
                    <div class="card-text">
                        <h3>Instagram</h3>
                        <p>Veja meus trabalhos criativos!</p>
                    </div>
                </div>
            </div>

            <!-- Portfólio -->
            <div class="link-card portfolio-card">
                <div class="card-content">
                    <i class="fas fa-briefcase"></i>
                    <div class="card-text">
                        <h3>Meu Portfólio</h3>
                        <p>Conheça meus projetos e trabalhos!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer>
            <p>© 2025 Maria Silva. Todos os direitos reservados.</p>
        </footer>
    </div>

    <!-- Modal de Agendamento -->
    <div id="appointmentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-calendar-alt"></i> Agendar Reunião</h2>
                <span class="close" id="closeModal">&times;</span>
            </div>
            
            <div class="modal-body">
                <div class="step" id="step1">
                    <h3>Escolha o mês e ano</h3>
                    <div class="month-year-selector">
                        <button id="prevMonth"><i class="fas fa-chevron-left"></i></button>
                        <span id="currentMonth">Janeiro 2025</span>
                        <button id="nextMonth"><i class="fas fa-chevron-right"></i></button>
                    </div>
                    
                    <div class="calendar" id="calendar">
                        <!-- Calendário será gerado dinamicamente -->
                    </div>
                    
                    <button class="btn-next" id="nextToTime" disabled>Próximo: Escolher Horário</button>
                </div>
                
                <div class="step" id="step2" style="display: none;">
                    <h3>Horários disponíveis</h3>
                    <p class="selected-date">Data selecionada: <span id="selectedDateText"></span></p>
                    
                    <div class="time-slots" id="timeSlots">
                        <!-- Horários serão gerados dinamicamente -->
                    </div>
                    
                    <div class="step-buttons">
                        <button class="btn-back" id="backToCalendar">Voltar</button>
                        <button class="btn-next" id="nextToForm" disabled>Próximo: Dados</button>
                    </div>
                </div>
                
                <div class="step" id="step3" style="display: none;">
                    <h3>Seus dados</h3>
                    <div class="appointment-summary">
                        <p><strong>Data:</strong> <span id="summaryDate"></span></p>
                        <p><strong>Horário:</strong> <span id="summaryTime"></span></p>
                    </div>
                    
                    <form id="appointmentForm">
                        <div class="form-group">
                            <label for="clientName">Nome completo: *</label>
                            <input type="text" id="clientName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="clientPhone">WhatsApp: *</label>
                            <input type="tel" id="clientPhone" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="clientEmail">E-mail: *</label>
                            <input type="email" id="clientEmail" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="appointmentType">Tipo de reunião: *</label>
                            <select id="appointmentType" required>
                                <option value="">Selecione...</option>
                                <option value="briefing">Briefing inicial</option>
                                <option value="apresentacao">Apresentação de projeto</option>
                                <option value="online">Reunião online</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="observations">Observações (opcional):</label>
                            <textarea id="observations" rows="3"></textarea>
                        </div>
                    </form>
                    
                    <div class="step-buttons">
                        <button class="btn-back" id="backToTime">Voltar</button>
                        <button class="btn-confirm" id="confirmAppointment">Confirmar Agendamento</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notiflix JS -->
    <script src="https://cdn.jsdelivr.net/npm/notiflix@3.2.6/dist/notiflix-aio-3.2.6.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
